{% extends "layout.njk" %}

{% import "parts/card.njk" as card %}

{% block content %}

   {% call card.render('Carrinho', 'cart container') %}
      <div>
         <p>Produto</p>
         <p>Pre√ßo</p>
         <p>Qtd.</p>
      </div>

      <div class="items">
      
         {% for item in cart.items %}

            <div class="item">
               <a href="/products/1">
                  <img 
                     src="{{item.product.image}}" 
                     alt="{{item.product.name}}"
                  >
                  <span class="title">{{item.product.name}}</span>
               </a>

               <span class="price">{{item.formatedPrice}}</span>

               <div class="quantity-control">
                  <form action="/cart/{{item.product.id}}/remove" method="POST">
                     <button class="remove">
                        <i class="material-icons">remove_circle_outline</i>
                     </button>
                  </form>

                  <span class="quantity">{{item.quantity}}</span>

                  <form action="/cart/{{item.product.id}}/add-one" method="POST">
                     <button class="add">
                        <i class="material-icons">add</i>
                     </button>
                  </form>
               </div>

               <form class="trash" action="/cart/{{item.product.id}}/remove-one" method="POST">
                  <button class="delete">
                     <i class="material-icons">delete</i>
                  </button>
               </form>
            </div>

         {% endfor %}
      
      </div>

      <div class="total">
         <p>Total</p>
         <span>{{cart.total.formatedPrice}}</span>
      </div>

      <div class="actions">
         <a href="/products/search" class="button shop">Continuar comprando</a>
         <form class="trash" action="/orders" method="POST">
            <button class="button order">
               Realizar pedido
            </button>
         </form>  
      </div>

   {% endcall %}

{% endblock content %}